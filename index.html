<head>
    <title>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</title>
    <link rel="stylesheet" href="styles.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<head>
    <title>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</title>
    <link rel="stylesheet" href="styles.css">
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body>
    <div class="navbar">
        <div class="infoDateBlock" id="today_naming"></div>
    </div>

    <div class="main">
        <div class="listInfo" id="listInfo">
        </div>
    </div>

    <div class="bottombar">
        <div style="border-radius: 20px 0 0 0;" class="rowButton">
            <button id="today">–°–µ–≥–æ–¥–Ω—è</button>
            <button id="tommorow">–ó–∞–≤—Ç—Ä–∞</button>
        </div>
        <div class="rowButton">
            <button id="selectDay">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –¥–µ–Ω—å</button>
        </div>
    </div>
</body>

<script>
    const shortNameDay = ["–í—Å", "–ü–Ω", "–í—Ç", "–°—Ä", "–ß—Ç", "–ü—Ç", "–°—É–±"];
    const nameDay = ["–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ", "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫", "–í—Ç–æ—Ä–Ω–∏–∫", "–°—Ä–µ–¥–∞", "–ß–µ—Ç–≤–µ—Ä–≥", "–ü—è—Ç–Ω–∏—Ü–∞", "–°—É–±–±–æ—Ç–∞"];
    const shower = document.getElementById("listInfo")

    function getTodayNumber() {
        const today = new Date();
        const dayOfWeek = today.getDay();
        return dayOfWeek
    }

    function getTommorowNumber() {
        const today = new Date();
        const dayOfWeek = today.getDay() + 1;
        return dayOfWeek
    }

    function getNowWeekName(tommorow = false) {
        var today = new Date();

        if (tommorow != false) {
            today.setDate(today.getDate() + 1);
        }

        var dd = today.getDate();
        var mm = today.getMonth() + 1;
        var yyyy = today.getFullYear();
        var newYear = false;
        if (dd < 10) {
            dd = '0' + dd;
        }
        if (mm < 10) {
            mm = '0' + mm;
        }
        if (mm < 9) {
            newYear = true;
            Yseptember = yyyy - 1
            var september = new Date(yyyy - 1, 8, 1);
        } else {
            Yseptember = yyyy
            var september = new Date(yyyy, 8, 1);
        }
        dayOfSeptember = (september.getDay() + 6) % 7;

        if (dayOfSeptember == 6) {
            firstWeak = new Date(Yseptember, 8, 1)
        } else {
            firstWeak = new Date(Yseptember, 7, 31 - dayOfSeptember)
        }

        var WeaksNumber = Math.ceil((today - firstWeak) / (7 * 24 * 60 * 60 * 1000)) - 1;
        if (WeaksNumber % 2 == 0) {
            today = '–ß–∏—Å–ª–∏—Ç–µ–ª—å';
        } else {
            today = '–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å';
        }
        return today
    }

    function parseToNormalView(array) {
        time = `${array[1]} - ${array[2]}`
        name = `${array[3]}`
        switch (array[4]) {
            case "–õ":
                type = "–õ–µ–∫—Ü–∏—è";
                break;
            case "–õ–∞–±":
                type = "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞";
                break;
            case "–ü—Ä":
                type = "–ü—Ä–∞–∫—Ç–∏–∫–∞";
                break;
            default:
                type = "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø";
        }
        teacher = array[5]
        number = array[6]

        text = `‚åö ${time}<br>
üìñ ${name}<br>
üßë‚Äçüè´ ${teacher}<br>
üö™ ${number}<br>`
        return text
    }

    const schedulejson = {
        "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫": {
            "–ß–∏—Å–ª–∏—Ç–µ–ª—å": "08:30-10:00 –¢–µ–æ—Ä–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è (–õ), –¥–æ—Ü–µ–Ω—Ç –ó–∞–¥–æ—Ä–æ–∂–Ω–µ–≤–∞ –Æ.–í., –ê—É–¥. 1-19 –ú<br>10:10-11:40 –¢–µ–æ—Ä–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è (–õ–∞–±), –¥–æ—Ü–µ–Ω—Ç –ó–∞–¥–æ—Ä–æ–∂–Ω–µ–≤–∞ –Æ.–í., –ê—É–¥. 2-3–± –ú<br>12:00-13:30 –õ–∏–Ω–∏–∏ —Å–≤—è–∑–∏ (–õ),  —Å—Ç–∞—Ä—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ì–æ–º–∞–∑–∫–æ–≤–∞ –õ.–ö., –ê—É–¥. 2-13 –ú<br>13:40-15:10 –õ–∏–Ω–∏–∏ —Å–≤—è–∑–∏ (–õ),  —Å—Ç–∞—Ä—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ì–æ–º–∞–∑–∫–æ–≤–∞ –õ.–ö., –ê—É–¥. 2-13 –ú",
            "–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å": "08:30-10:00 –¢–µ–æ—Ä–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è (–õ), –¥–æ—Ü–µ–Ω—Ç –ó–∞–¥–æ—Ä–æ–∂–Ω–µ–≤–∞ –Æ.–í., –ê—É–¥. 1-19 –ú<br>10:10-11:40 –¢–µ–æ—Ä–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è (–õ–∞–±), –¥–æ—Ü–µ–Ω—Ç –ó–∞–¥–æ—Ä–æ–∂–Ω–µ–≤–∞ –Æ.–í., –ê—É–¥. 2-3–± –ú<br>12:00-13:30 –õ–∏–Ω–∏–∏ —Å–≤—è–∑–∏ (–ü—Ä),  —Å—Ç–∞—Ä—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ì–æ–º–∞–∑–∫–æ–≤–∞ –õ.–ö., –ê—É–¥. 2-13 –ú<br>13:40-15:10 –õ–∏–Ω–∏–∏ —Å–≤—è–∑–∏ (–ü—Ä),  —Å—Ç–∞—Ä—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ì–æ–º–∞–∑–∫–æ–≤–∞ –õ.–ö., –ê—É–¥. 2-13 –ú"
        },
        "–í—Ç–æ—Ä–Ω–∏–∫": {
            "–ß–∏—Å–ª–∏—Ç–µ–ª—å": "12:00-13:30 –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–õ), –¥–æ—Ü–µ–Ω—Ç –°—Ç–µ–±–µ–Ω—å–∫–æ–≤–∞ –ù.–ê., –ê—É–¥. 2-17 –ú<br>13:40-15:10 –¢–µ–æ—Ä–∏—è —ç–ª–µ–∫—Ç—Ä–æ—Å–≤—è–∑–∏ (–õ), —Å—Ç–∞—Ä—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ï—Ä–º–∞–∫–æ–≤–∞ –ù.–ù., –ê—É–¥. 2-17 –ú<br>15:20-16:50 –¢–µ–æ—Ä–∏—è —ç–ª–µ–∫—Ç—Ä–æ—Å–≤—è–∑–∏ (–ü—Ä), —Å—Ç–∞—Ä—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ï—Ä–º–∞–∫–æ–≤–∞ –ù.–ù., –ê—É–¥. 2-17 –ú<br>17:00-18:30 –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞ –∏ —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω–∏–∫–∞ (–ü—Ä), –¥–æ—Ü–µ–Ω—Ç –°—Ç–µ–±–µ–Ω—å–∫–æ–≤ –ê.–ú., –ê—É–¥. 2-17 –ú",
            "–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å": "12:00-13:30 –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–ü—Ä), –¥–æ—Ü–µ–Ω—Ç –°—Ç–µ–±–µ–Ω—å–∫–æ–≤–∞ –ù.–ê., –ê—É–¥. 2-17 –ú<br>13:40-15:10 –¢–µ–æ—Ä–∏—è —ç–ª–µ–∫—Ç—Ä–æ—Å–≤—è–∑–∏ (–õ), —Å—Ç–∞—Ä—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ï—Ä–º–∞–∫–æ–≤–∞ –ù.–ù., –ê—É–¥. 2-17 –ú<br>15:20-16:50 <br>17:00-18:30 "
        },
        "–°—Ä–µ–¥–∞": "13:40-15:10 –°–µ—Ç–∏ –∏ —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–õ), –¥–æ—Ü–µ–Ω—Ç –†–æ–º–∞—Å–µ–≤–∏—á –ü.–í., –ê—É–¥. 2-13 –ú<br>15:20-16:50 –°–µ—Ç–∏ –∏ —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–ü—Ä), –¥–æ—Ü–µ–Ω—Ç –†–æ–º–∞—Å–µ–≤–∏—á –ü.–í., –ê—É–¥. 2-13 –ú<br>17:00-18:30 –¶–∏—Ñ—Ä–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–¥–∞—á–∏ (–ü—Ä), –¥–æ—Ü–µ–Ω—Ç –†–æ–º–∞—Å–µ–≤–∏—á –ü.–í., –ê—É–¥. 2-13 –ú",
        "–ß–µ—Ç–≤–µ—Ä–≥": {
            "–ß–∏—Å–ª–∏—Ç–µ–ª—å": "12:00-13:30 –¢–µ–æ—Ä–∏—è —ç–ª–µ–∫—Ç—Ä–æ—Å–≤—è–∑–∏ (–õ–∞–±), —Å—Ç–∞—Ä—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ï—Ä–º–∞–∫–æ–≤–∞ –ù.–ù., –ê—É–¥. 2-06 –ú<br>13:40-15:10 –¢–µ–æ—Ä–∏—è —ç–ª–µ–∫—Ç—Ä–æ—Å–≤—è–∑–∏ (–ü—Ä), —Å—Ç–∞—Ä—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ï—Ä–º–∞–∫–æ–≤–∞ –ù.–ù., –ê—É–¥. 2-06 –ú",
            "–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å": "12:00-13:30 <br>13:40-15:10 "
        },
        "–ü—è—Ç–Ω–∏—Ü–∞": {
            "–ß–∏—Å–ª–∏—Ç–µ–ª—å": "12:00-13:30 –°–∏—Å—Ç–µ–º—ã –∫–æ–º–º—É—Ç–∞—Ü–∏–π (–õ–∞–±), –¥–æ—Ü–µ–Ω—Ç –°–µ–º–µ–Ω–æ–≤ –ï.–°., –ê—É–¥. 2-06 –ú<br>13:40-15:10 –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–õ–∞–±), –¥–æ—Ü–µ–Ω—Ç –°—Ç–µ–±–µ–Ω—å–∫–æ–≤–∞ –ù.–ê., –ê—É–¥. 2-13–∞ –ú<br>15:20-16:50 –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–õ–∞–±), –¥–æ—Ü–µ–Ω—Ç –°—Ç–µ–±–µ–Ω—å–∫–æ–≤–∞ –ù.–ê., –ê—É–¥. 1-19 –ú",
            "–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å": "12:00-13:30 –°–∏—Å—Ç–µ–º—ã –∫–æ–º–º—É—Ç–∞—Ü–∏–π (–õ–∞–±), –¥–æ—Ü–µ–Ω—Ç –°–µ–º–µ–Ω–æ–≤ –ï.–°., –ê—É–¥. 2-06 –ú<br>13:40-15:10 –°–∏—Å—Ç–µ–º—ã –∫–æ–º–º—É—Ç–∞—Ü–∏–π (–ü—Ä), –¥–æ—Ü–µ–Ω—Ç –°–µ–º–µ–Ω–æ–≤ –ï.–°., –ê—É–¥. 2-13 –ú<br>15:20-16:50 –¢–µ–æ—Ä–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è (–ü—Ä), –¥–æ—Ü–µ–Ω—Ç –ó–∞–¥–æ—Ä–æ–∂–Ω–µ–≤–∞ –Æ.–í., –ê—É–¥. 1-19 –ú"
        },
        "–°—É–±–±–æ—Ç–∞": "08:30-10:00 –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞ –∏ —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω–∏–∫–∞ (–õ), –¥–æ—Ü–µ–Ω—Ç –°—Ç–µ–±–µ–Ω—å–∫–æ–≤ –ê.–ú., –ê—É–¥. 2-01 –ö<br>10:10-11:40 –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞ –∏ —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω–∏–∫–∞ (–õ–∞–±), –¥–æ—Ü–µ–Ω—Ç –°—Ç–µ–±–µ–Ω—å–∫–æ–≤ –ê.–ú., –ê—É–¥. 3-15 –ö<br>12:00-13:30 –°–µ—Ç–∏ –∏ —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–õ–∞–±), –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –†–æ–º–∞—Å–µ–≤–∏—á –ï.–ü.,  –ê—É–¥. 2-13–± –ú<br>13:40-15:10 –¶–∏—Ñ—Ä–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–¥–∞—á–∏ (–õ–∞–±), –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –†–æ–º–∞—Å–µ–≤–∏—á –ï.–ü.,  –ê—É–¥. 2-13–± –ú"
    }

    function checkSplit(day) {
        const infoShedule = schedulejson[nameDay[day]]
        const nowDay = Object.keys(infoShedule)
        if (nowDay.length === 2) {
            return true
        } else {
            return false
        }
    }

    function getDaySchedule(nameDayC, nameWeekC) {

        const infoShedule = schedulejson[nameDay[nameDayC]]
        console.log(infoShedule)
        const nowDay = Object.keys(infoShedule)

        const regex = /^(\d{2}:\d{2})-(\d{2}:\d{2})\s(.+?)\s\((–õ|–õ–∞–±|–ü—Ä)\)\s*,\s*(.+?),\s*–ê—É–¥\.\s([\d\-]+[–∞-—è–ê-–Ø]?\s?[–ú–ö]?)$/;

        var textToShow = "";
        shower.textContent = "";
        const lessonDiv = document.createElement('div');
        lessonDiv.classList.add('infoBlock');
        lessonDiv.innerHTML = nameWeekC
            ? `${nameDay[nameDayC]} | ${nameWeekC}`
            : `${nameDay[nameDayC]}`;
        shower.appendChild(lessonDiv);
        if (nowDay.length === 2) {
            const text = infoShedule[nameWeekC]
            const list = text.split("<br>");
            list.forEach(function (element, index, array) {
                const match = element.match(regex);


                const lessonDiv = document.createElement('div');
                lessonDiv.classList.add('infoBlock');

                const lessonDivIn = document.createElement('div');
                lessonDivIn.innerHTML = parseToNormalView(match);
                lessonDivIn.classList.add('inInfoBlock');
                lessonDiv.appendChild(lessonDivIn);

                shower.appendChild(lessonDiv);
            });
        } else {
            const list = infoShedule.split("<br>");
            list.forEach(function (element, index, array) {
                console.log(element);
                const match = element.match(regex);
                console.log(match);
                const lessonDiv = document.createElement('div');
                lessonDiv.classList.add('infoBlock');

                const lessonDivIn = document.createElement('div');
                lessonDivIn.innerHTML = parseToNormalView(match);
                lessonDivIn.classList.add('inInfoBlock');
                lessonDiv.appendChild(lessonDivIn);

                shower.appendChild(lessonDiv);
            });
        }
    }

    function today() {
        if (checkSplit(getTodayNumber())) {
            getDaySchedule(getTodayNumber(), getNowWeekName())
        } else {
            getDaySchedule(getTodayNumber(), false)
        }
    }

    function tommorow() {
        if (checkSplit(getTodayNumber() + 1)) {
            getDaySchedule(getTodayNumber() + 1, getNowWeekName(true))
        } else {
            getDaySchedule(getTodayNumber() + 1, false)
        }
    }

    document.getElementById("today").onclick = today;

    document.getElementById("tommorow").onclick = tommorow;

    const date = new Date();

    const dd = String(date.getDate()).padStart(2, '0');
    const mm = String(date.getMonth() + 1).padStart(2, '0');
    const yy = String(date.getFullYear());
    const formattedDate = `${dd}.${mm}.${yy}`;

    document.getElementById("today_naming").textContent = `${getNowWeekName()} | ${formattedDate}   `

    today();
</script>